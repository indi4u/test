## the main code for agent